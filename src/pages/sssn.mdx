import Layout from '@theme/Layout';
import { NoSidebar } from '@theme/hooks/useLayout'; // å…³é”®ï¼šç¦ç”¨ä¾§è¾¹æ 
import useDocusaurusContext from '@docusaurus/useDocusaurusContext';

// å¿…é¡»æŠŠ NoSidebar å¯¼å‡ºï¼Œå‘Šè¯‰ Docusaurus ä¸æ¸²æŸ“ä¾§è¾¹æ 
export const layout = NoSidebar;

export default function ThoughtsPage() {
  const { siteConfig } = useDocusaurusContext();

  const moments = [
    {
      id: 1,
      author: "æˆ‘",
      avatar: "ğŸ˜",
      time: "5åˆ†é’Ÿå‰",
      content: "ç¼–è¯‘ç»ˆäºé€šè¿‡äº†ï¼âœŒï¸ ç°åœ¨è¿™ä¸ªé¡µé¢å¹²å¹²å‡€å‡€ï¼Œå®Œå…¨å°±æ˜¯ç‹¬ç«‹çš„æœ‹å‹åœˆäº†ã€‚",
      images: [
        "https://picsum.photos/400/300?random=1",
        "https://picsum.photos/400/300?random=2",
      ],
      likes: 5
    },
    {
      id: 2,
      author: "æˆ‘",
      avatar: "ğŸ˜",
      time: "æ˜¨å¤© 22:15",
      content: "æ·±å¤œæ€è€ƒï¼šä¸ºä»€ä¹ˆ Docusaurus è¿™ä¹ˆå¼ºå¤§ï¼Ÿå› ä¸º MDX è®©æˆ‘ä»¬å¯ä»¥éšæ„å®šåˆ¶ç»„ä»¶ã€‚æ¨èå¤§å®¶è¯•è¯•ï¼",
      images: [],
      likes: 12
    },
    {
      id: 3,
      author: "æˆ‘",
      avatar: "ğŸ˜",
      time: "2026-02-14",
      content: "åˆ†äº«ä¸€å¼ å›¾ã€‚æƒ…äººèŠ‚å¿«ä¹ï¼",
      images: ["https://picsum.photos/600/400?random=5"],
      likes: 24
    },
    {
      id: 4,
      author: "æˆ‘",
      avatar: "ğŸ˜",
      time: "2026-02-10",
      likes: 8,
      content: "æ˜¥èŠ‚å‡æœŸï¼Œåœ¨è€å®¶æ”¾çƒŸèŠ±ğŸ† å¹´å‘³åè¶³ã€‚",
      images: [
        "https://picsum.photos/400/600?random=6",
        "https://picsum.photos/400/600?random=7",
      ]
    }
  ];

  const handleImageClick = (src) => {
    window.open(src, '_blank');
  };

  return (
    <Layout
      title="æˆ‘çš„ç¢ç¢å¿µ"
      description="æœ‹å‹åœˆé£æ ¼ç¢ç¢å¿µ"
      // å…³é”®ï¼šä¸ä¼ å…¥ header å’Œ footerï¼Œæˆ–è€…é€šè¿‡ CSS éšè—
    >
      {/* æ ¹å®¹å™¨ï¼šå¼ºåˆ¶è¦†ç›–å…¨å±€æ ·å¼ï¼Œéšè—å¯¼èˆªå’Œé¡µè„š */}
      <div className="fullscreen-container">
        <main className="moment-main">
          <div className="moment-container">
            <h1 style={{ textAlign: 'center', marginBottom: '2rem' }}>ğŸ’­ æˆ‘çš„ç¢ç¢å¿µ</h1>

            <div className="moment-feed">
              {moments.map((item) => (
                <div key={item.id} className="moment-item">
                  <div className="moment-avatar">
                    {item.avatar}
                  </div>

                  <div className="moment-content">
                    <div className="moment-header">
                      <span className="moment-author">{item.author}</span>
                      <span className="moment-time">{item.time}</span>
                    </div>

                    <div className="moment-text">{item.content}</div>

                    {item.images?.length > 0 && (
                      <div
                        className={`moment-images ${item.images.length === 1 ? 'single' : ''}`}
                        style={item.images.length === 2 ? { gridTemplateColumns: 'repeat(2, 1fr)' } : {}}
                      >
                        {item.images.map((img, idx) => (
                          <div
                            key={idx}
                            className="moment-image-item"
                            style={{ backgroundImage: `url(${img})` }}
                            onClick={() => handleImageClick(img)}
                            role="button"
                            tabIndex={0}
                            onKeyDown={(e) => (e.key === 'Enter' || e.key === ' ') && handleImageClick(img)}
                          />
                        ))}
                      </div>
                    )}

                    {item.likes > 0 && (
                      <div className="moment-actions">
                        <div className="moment-like">
                          <span>â¤ï¸</span> {item.likes}
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              ))}

              <div className="moment-end">
                â€”â€” æ²¡æœ‰æ›´å¤šäº†ï¼Œä½†ç”Ÿæ´»è¿˜åœ¨ç»§ç»­ â€”â€”
              </div>
            </div>
          </div>
        </main>
      </div>

      <style>{`
        /* å¼ºåˆ¶éšè—é¡¶éƒ¨å¯¼èˆªæ å’Œåº•éƒ¨é¡µè„š */
        .fullscreen-container {
          --ifm-navbar-height: 0px !important; /* å‘Šè¯‰å†…å®¹åŒºä¸è¦ç•™å¯¼èˆªæ çš„ä½ç½® */
        }
        .fullscreen-container > header,
        .fullscreen-container > footer {
          display: none !important;
        }

        /* è®©å†…å®¹é“ºæ»¡å±å¹• */
        .moment-main {
          min-height: 100vh;
          padding-top: 20px;
          padding-bottom: 40px;
          background-color: var(--ifm-background-color);
        }

        /* æœ‹å‹åœˆæ ¸å¿ƒæ ·å¼ */
        .moment-container {
          max-width: 600px;
          margin: 0 auto;
          padding: 0 0.5rem;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        }
        .moment-feed {
          position: relative;
        }
        .moment-feed::before {
          content: '';
          position: absolute;
          left: 30px;
          top: 10px;
          bottom: 10px;
          width: 2px;
          background: var(--ifm-color-emphasis-300);
          opacity: 0.3;
          border-radius: 2px;
        }
        .moment-item {
          position: relative;
          margin-bottom: 1.5rem;
          padding-left: 60px;
        }
        .moment-item::after {
          content: '';
          position: absolute;
          left: 27px;
          top: 18px;
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: var(--ifm-color-primary);
          border: 2px solid var(--ifm-background-color);
          z-index: 1;
        }
        .moment-avatar {
          position: absolute;
          left: 10px;
          top: 0;
          width: 40px;
          height: 40px;
          border-radius: 6px;
          background-color: var(--ifm-color-primary);
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 18px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.05);
          z-index: 2;
        }
        .moment-header {
          display: flex;
          align-items: baseline;
          flex-wrap: wrap;
          margin-bottom: 0.25rem;
        }
        .moment-author {
          font-weight: 600;
          font-size: 0.95rem;
          color: var(--ifm-color-primary);
          margin-right: 0.75rem;
        }
        .moment-time {
          font-size: 0.7rem;
          color: var(--ifm-color-emphasis-600);
        }
        .moment-content {
          background-color: var(--ifm-card-background-color);
          border-radius: 14px 18px 18px 18px;
          padding: 0.9rem 1rem 0.7rem 1rem;
          box-shadow: 0 1px 2px rgba(0,0,0,0.02);
          border: 1px solid var(--ifm-color-emphasis-200);
          word-break: break-word;
        }
        .moment-text {
          font-size: 0.95rem;
          line-height: 1.5;
          margin-bottom: 0.5rem;
          white-space: pre-wrap;
        }
        .moment-images {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 4px;
          margin: 0.75rem 0 0.5rem 0;
          border-radius: 8px;
          overflow: hidden;
        }
        .moment-image-item {
          aspect-ratio: 1 / 1;
          background-color: var(--ifm-color-emphasis-200);
          background-size: cover;
          background-position: center;
          cursor: pointer;
          border-radius: 4px;
          transition: transform 0.1s ease;
        }
        .moment-image-item:hover {
          transform: scale(1.02);
        }
        .moment-images.single {
          grid-template-columns: 1fr;
          max-width: 240px;
        }
        .moment-images.single .moment-image-item {
          max-height: 240px;
          background-size: contain;
          background-repeat: no-repeat;
          background-color: transparent;
        }
        .moment-actions {
          display: flex;
          justify-content: flex-end;
          align-items: center;
          margin-top: 0.4rem;
          font-size: 0.75rem;
          color: var(--ifm-color-emphasis-600);
          border-top: 1px dashed var(--ifm-color-emphasis-200);
          padding-top: 0.4rem;
        }
        .moment-like {
          display: flex;
          align-items: center;
          gap: 4px;
        }
        .moment-like span {
          color: var(--ifm-color-danger);
          font-size: 1rem;
        }
        .moment-end {
          text-align: center;
          margin-top: 3rem;
          color: var(--ifm-color-emphasis-500);
          font-size: 0.8rem;
        }

        /* æš—è‰²æ¨¡å¼é€‚é… */
        [data-theme='dark'] .moment-content {
          background-color: var(--ifm-background-surface-color);
          border-color: var(--ifm-color-emphasis-300);
        }
        [data-theme='dark'] .moment-avatar {
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
      `}</style>
    </Layout>
  );
}
